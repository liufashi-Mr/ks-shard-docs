import Basic from './Basic';
import WithActions from './WithActions';
import WithFilters from './WithFilters';

## DataTable

DataTable 是一个功能强大的数据表格组件，支持排序、筛选、分页、选择、操作等功能。

### Usage

`DataTable`

<DemoBlock title="DataTable 基本用法" description="展示 DataTable 组件的基本用法，包括数据展示、排序等功能">
  <Basic />
</DemoBlock>

<DemoBlock title="DataTable 带操作" description="展示 DataTable 组件带行操作和批量操作的用法">
  <WithActions />
</DemoBlock>

<DemoBlock title="DataTable 带筛选和排序" description="展示 DataTable 组件带筛选、排序和搜索功能的用法">
  <WithFilters />
</DemoBlock>

### API

#### DataTable Props

| 参数 | 说明 | 类型 | 默认值 |
| --- | --- | --- | --- |
| table | 表格实例 | `Table` | - |
| loading | 加载状态 | `boolean` | `false` |
| data | 表格数据 | `T[]` | `[]` |
| columns | 列配置 | `ColumnDef<T>[]` | `[]` |
| rowCount | 总行数 | `number` | `0` |
| enableSelection | 是否启用选择 | `boolean` | `false` |
| enableMultiSelection | 是否启用多选 | `boolean` | `false` |
| enableVisible | 是否启用列显示控制 | `boolean` | `false` |
| manual | 是否手动分页 | `boolean` | `false` |
| onParamsChange | 参数变化回调 | `(params: any) => void` | - |
| state | 表格状态 | `TableState` | - |
| getRowId | 行ID获取函数 | `(row: T) => string` | - |
| meta | 元数据配置 | `TableMeta` | - |

#### ColumnDef 配置

| 参数 | 说明 | 类型 | 默认值 |
| --- | --- | --- | --- |
| accessorKey | 数据字段名 | `string` | - |
| header | 列标题 | `string \| ReactNode` | - |
| cell | 自定义单元格渲染 | `(info: CellContext) => ReactNode` | - |
| meta | 列元数据 | `ColumnMeta` | - |

#### ColumnMeta 配置

| 参数 | 说明 | 类型 | 默认值 |
| --- | --- | --- | --- |
| sortable | 是否可排序 | `boolean` | `false` |
| th | 表头配置 | `{ width?: number }` | - |
| td | 单元格配置 | `{ width?: number }` | - |

#### TableMeta 配置

| 参数 | 说明 | 类型 | 默认值 |
| --- | --- | --- | --- |
| refetch | 刷新函数 | `() => void` | - |
| getProps | 获取组件属性 | `{ table?: () => any, toolbar?: () => any, filters?: () => any, empty?: () => any }` | - |

### 使用示例

#### 基本用法

```tsx
import { DataTable, Card } from '@kubed/components';
import { ColumnDef } from '@tanstack/react-table';

const columns: ColumnDef<DataType>[] = [
  {
    accessorKey: 'name',
    header: '姓名',
    meta: {
      sortable: true,
    },
  },
  // ... 其他列配置
];

const table = DataTable.useTable({
  columns,
  data: dataList,
  loading: isLoading,
  // ... 其他配置
});

<Card padding={0}>
  <DataTable.DataTable table={table} />
</Card>
```

#### 带操作的用法

```tsx
const columns: ColumnDef<DataType>[] = [
  // ... 数据列
  {
    header: '操作',
    accessorKey: 'actions',
    cell: ({ row }) => (
      <div>
        <Button onClick={() => handleEdit(row.original)}>编辑</Button>
        <Button onClick={() => handleDelete(row.original)}>删除</Button>
      </div>
    ),
  },
];

const table = DataTable.useTable({
  columns,
  data: dataList,
  enableSelection: true,
  enableMultiSelection: true,
  meta: {
    getProps: {
      toolbar: () => ({
        batchActions: <Button onClick={handleBatchDelete}>批量删除</Button>,
      }),
    },
  },
});
```

#### 带筛选的用法

```tsx
const table = DataTable.useTable({
  columns,
  data: dataList,
  meta: {
    getProps: {
      toolbar: () => ({
        toolbarLeft: (
          <div>
            <Input placeholder="搜索" />
            <Select placeholder="筛选">
              <Select.Option value="option1">选项1</Select.Option>
            </Select>
          </div>
        ),
      }),
      filters: () => ({
        simpleMode: false,
        suggestions: [
          { key: 'name', label: '姓名' },
          { key: 'status', label: '状态' },
        ],
      }),
    },
  },
});
```
